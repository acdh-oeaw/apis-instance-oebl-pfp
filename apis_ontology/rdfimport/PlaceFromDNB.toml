#####################################################
# Create an E53_Place from a d-nb.info RDF endpoint #
#####################################################
superclass = "apis_ontology.models.Place"
regex = "https://d-nb.info.*"
[[attributes]]
# name
sparql = """
PREFIX gndo: <https://d-nb.info/standards/elementset/gnd#>
SELECT ?name
WHERE {
  ?subject gndo:preferredNameForThePlaceOrGeographicName ?name
}
"""
[[attributes]]
# lon
sparql = '''
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
SELECT ?lng
WHERE {
  ?subject geo:hasGeometry ?geo1 .
  ?geo1 geo:asWKT ?point .
  BIND(REPLACE(str(?point), "Point \\( \\+(\\d+.\\d+).*", "$1") as ?lng)
  }
'''
[[attributes]]
# lat
sparql = '''
PREFIX geo: <http://www.opengis.net/ont/geosparql#>
SELECT ?lat
WHERE {
  ?subject geo:hasGeometry ?geo1 .
  ?geo1 geo:asWKT ?point .
  BIND(REPLACE(str(?point), "Point \\( \\+(\\d+.\\d+) \\+(\\d+.\\d+) .$", "$2") as ?lat)
  }
'''
